{% extends "base.html" %}

{% block header %}
    {{ block.super }}
{% endblock %}

{% block content %}

    <div class="container-fluid" style="height: max-content">
        {% if comments %}
            <div class="alert alert-info col-sm-3 col-sm-offset-1">
                <h4>Your followers posts: </h4>
            </div>
            <div class="row">
                {% include "items/comments.html" %}
            </div>
        {% elif not request.user.is_authenticated %}
            <div class="alert alert-danger col-sm-10">
                <h4>YOU MUST <strong>
                    <a href="{% url "login" %}"> Sign In</a> or
                    <a href="{% url "register" %}">Sign Up</a>
                </strong>first to see your account</h4>
            </div>
            <div class="alert alert-info col-sm-10">
                <h4>After that, you will be able to meet people like: </h4>
            </div>
        {% else %}

            <div class="alert alert-warning col-sm-10 ">
                <h4><strong>Warning!</strong> You've got no followers :(</h4>
            </div>
        {% endif %}

        {% if request.user.is_authenticated %}
            <div class="alert alert-success col-sm-10 ">
                <h4><strong>People</strong> are interested in subjects like you, <strong>click View</strong> to see
                    their
                    profiles,
                    if empty (see all users)</h4>
            </div>

        {% endif %}
        <div class="row">
            {% include "items/profiles.html" %}
        </div>
        <div class="row">
            <div class="col-sm-3">
                <h1 style="text-align: center"><span class="glyphicon glyphicon-user"></span></h1>
                <h3 style="text-align: center">Usuarios</h3>
                <h3 style="text-align: center"> {{ all_users.count }}</h3>
            </div>
            <div class="col-sm-3">
                <h1 style="text-align: center"><span class="glyphicon glyphicon-hd-video"></span></h1>
                <h3 style="text-align: center">Videos</h3>
                <h3 style="text-align: center">{{ all_videos.count }}</h3>
            </div>
            <div class="col-sm-3">
                <h1 style="text-align: center"><span class="glyphicon glyphicon-book"></span></h1>
                <h3 style="text-align: center">Asignaturas</h3>
                <h3 style="text-align: center">{{ all_subjects.count }}</h3>
            </div>
            <div class="col-sm-3">
                <h1 style="text-align: center"><span class="glyphicon glyphicon-comment"></span></h1>
                <h3 style="text-align: center">Comentarios</h3>
                <h3 style="text-align: center">{{ all_comments.count }}</h3>
            </div>
        </div>
    </div>

{% endblock %}

{% block tops %}

    <div class="panel-primary" style="padding-top: 5%">
        <div class="panel-heading">
            <h4>Top Subidores</h4>
        </div>
        <div class="panel-body" style="background-color: #f7f7f7">
            <ol>
                {% for t3u in top3users %}
                    <a href="{% url "accounts:detail" slug=t3u.slug %}">
                        <li>{{ t3u.username }}</li>
                    </a>
                {% endfor %}
            </ol>
        </div>
    </div>

    <div class="panel-primary" style="padding-top: 10%">
        <div class="panel-heading">
            <h4>Mejores Videos</h4>
        </div>
        <div class="panel-body" style="background-color: #f7f7f7">
            <ol>
                {% for t3vl in top3videoslikes %}
                    <a href="{% url "videos:video_id" video_id=t3vl.id %}">
                        <li>{{ t3vl.title }}</li>
                    </a>
                {% endfor %}
            </ol>
        </div>
    </div>

    <div class="panel-primary" style="padding-top: 10%">
        <div class="panel-heading">
            <h4>Videos Mas Vistos</h4>
        </div>
        <div class="panel-body" style="background-color: #f7f7f7">
            <ol>
                {% for t3vv in top3videosviews %}
                    <a href="{% url "videos:video_id" video_id=t3vv.id %}">
                        <li>{{ t3vv.title }}</li>
                    </a>
                {% endfor %}
            </ol>
        </div>
    </div>

{% endblock %}

{% block detalle %}
    {% if user_.is_authenticated %}
        {% if user.image %}
            <a href="{% url "accounts:edit" slug=user.slug %}">
                <img style="height: 80%; width: 80%;margin-top: 20px" src="{{ user.image.url }}">
            </a>
        {% else %}

            <a href="{% url "accounts:edit" slug=user.slug %}">
                <img class="img-responsive" src="https://ssl.gstatic.com/accounts/ui/avatar_2x.png"
                     style="height: 70%; width:70%;margin-top: 20px; margin-left: 40px">
            </a>
        {% endif %}
        <div>
            <a href="{% url "myvideos" %}">{{ user.video_set.count }} Videos subidos</a>
        </div>
    {% endif %}
{% endblock %}

